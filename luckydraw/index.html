<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lucky Draw â€” 5G88 x EVO VIP</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
<style>
:root{
  --bg1:#0b0c12; --bg2:#07080d;
  --card:#11131b; --border:#1c2030;
  --ink:#ecf0f6;  --muted:#9aa0ab;
  --gold:#ffd76b; --gold-2:#f5c542; --gold-3:#f1b70a;
  --accent:#4aa8ff; --success:#25d366; --danger:#ff5c6a;
  --logo-size:78px;
  --bulb-count:56;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(1200px 800px at 10% -10%, #131625 0%, transparent 60%),
    radial-gradient(900px 600px at 110% 0%, #0c1020 0%, transparent 55%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--ink); font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  display:flex; align-items:center; justify-content:center; padding:18px;
}
.app{ width:min(1220px,100%); display:grid; gap:18px; grid-template-columns:1.25fr 1fr; }
@media (max-width:980px){ .app{grid-template-columns:1fr} }

.card{
  background:
    radial-gradient(120% 80% at 50% -30%, rgba(255,255,255,.06), transparent 50%),
    linear-gradient(180deg,#121626,#0d1120);
  border:1px solid var(--border); border-radius:20px;
  box-shadow:
    0 20px 50px rgba(0,0,0,.45),
    inset 0 1px 0 rgba(255,255,255,.05),
    inset 0 -80px 120px rgba(255,255,255,.02);
  overflow:hidden;
}
.header{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; border-bottom:1px solid #1b2030;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0));
}
.title{font-weight:800; letter-spacing:.3px; display:flex; align-items:center; gap:10px}
.title .dot{
  width:12px; height:12px; border-radius:50%;
  background: radial-gradient(circle at 35% 35%, var(--gold), var(--gold-3));
  box-shadow:0 0 16px rgba(245,197,66,.7), 0 0 40px rgba(245,197,66,.25) inset;
}
.toolbar{display:flex; gap:10px; flex-wrap:wrap}
.btn{
  appearance:none; border:none; padding:10px 14px; border-radius:12px; cursor:pointer;
  font-weight:800; letter-spacing:.2px;
  color:#0b0b0f; background:linear-gradient(180deg,#ffd86c,#f1b70a);
  box-shadow:0 10px 30px rgba(245,197,66,.25), inset 0 1px 0 rgba(255,255,255,.55);
  transition:.2s transform ease, .25s filter ease, .2s box-shadow ease;
}
.btn:hover{ transform:translateY(-1px) }
.btn:active{ transform:translateY(1px) scale(.98) }
.btn.ghost{
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  color:var(--ink); border:1px solid #2a3046; box-shadow:none;
}
.btn.success{ background:linear-gradient(180deg,#3aef91,#18c56b); color:#03180e }
.btn.danger{ background:linear-gradient(180deg,#ff7683,#ef3c50); color:#26040a }
.content{padding:18px}
.footer{padding:14px 18px; border-top:1px solid #1b2030; display:flex; gap:10px; flex-wrap:wrap; justify-content:space-between;}
.row{display:grid; gap:10px}
.row-inline{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.grow{flex:1}
label{font-size:12px; color:var(--muted); margin-bottom:6px; display:block}
input[type="text"], textarea{
  width:100%; background:linear-gradient(180deg,#0c0f1a,#0a0e18);
  border:1px solid #232a42; color:var(--ink);
  padding:12px; border-radius:12px; outline:none; font-size:14px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02), 0 6px 30px rgba(0,0,0,.25);
}
textarea{min-height:110px; resize:vertical}
.names{ display:flex; flex-wrap:wrap; gap:8px; max-height:200px; overflow:auto; padding-right:4px; }
.name-pill{
  background:linear-gradient(180deg,#171b2a,#0f1322);
  border:1px solid #28314a; border-radius:999px; padding:8px 12px; display:inline-flex; gap:10px; align-items:center;
}
.name-pill b{letter-spacing:.2px}
.name-pill button{ background:#1c2236; color:#c6cad6; border:1px solid #2f3958; border-radius:8px; padding:4px 8px; cursor:pointer;}

.stage{
  position:relative; display:flex; align-items:center; justify-content:center; padding:18px;
  background:
    radial-gradient(60% 40% at 50% 0%, rgba(90,120,255,.12), transparent 60%),
    linear-gradient(180deg, #0e1222, #0a0d18);
}
.wheel-wrap{
  position:relative; width:min(620px, 92vw); aspect-ratio:1/1;
  display:grid; place-items:center; margin:10px auto;
  filter: drop-shadow(0 30px 60px rgba(0,0,0,.5));
}
.pointer{
  position:absolute; top:-5px; z-index:7; width:0; height:0;
  border-left:18px solid transparent; border-right:18px solid transparent; border-bottom:28px solid #fff;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.55));
}
.pointer::after{
  content:""; position:absolute; left:-18px; right:-18px; top:22px; height:12px; border-radius:10px;
  background: radial-gradient(120% 80% at 50% 0%, rgba(0,0,0,.5), transparent 70%);
}
.pointer.on{ animation: pointerPulse 1.2s ease-in-out infinite; }
@keyframes pointerPulse{
  0%,100% { transform: translateY(0) }
  50% { transform: translateY(-2px) }
}

.wheel{
  width:100%; height:100%; border-radius:50%; display:block;
  transform:rotate(var(--deg, 0deg)); transition: transform var(--dur, 0s) var(--easing, ease-out);
  border:12px solid #0e0f15;
  background:
    radial-gradient(70% 70% at 30% 25%, rgba(255,255,255,.12), transparent 40%),
    radial-gradient(120% 120% at 70% 80%, rgba(0,0,0,.35), transparent 50%),
    #0d0f15;
  box-shadow:
    inset 0 0 0 2px #2a2d3e,
    0 0 0 10px #151826,
    inset 0 60px 120px rgba(0,0,0,.3);
  z-index:2
}
.wheel path{ filter: drop-shadow(0 0 0.4px rgba(0,0,0,.4)); }
.wheel text{
  fill:#fff; font-weight:800; letter-spacing:.15px;
  paint-order:stroke; stroke:rgba(0,0,0,.36); stroke-width:.6px;
}

/* HUB + LOGO */
.hub{
  position:absolute; width:calc(var(--logo-size) + 28px); height:calc(var(--logo-size) + 28px);
  border-radius:50%;
  background:
    radial-gradient(circle at 35% 35%, #fff, #cfcfcf 40%, #8c8c8c 65%, #3a3a3a 85%);
  box-shadow:0 16px 40px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.65);
  z-index:6; display:grid; place-items:center; overflow:hidden;
}
.hub::after{
  content:""; position:absolute; inset:10px; border-radius:50%;
  background: radial-gradient(circle at 35% 35%, rgba(255,220,120,.8), rgba(241,183,10,.7));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 0 26px rgba(245,197,66,.55);
}
.hub-logo{ position:relative; z-index:2; width:var(--logo-size); height:var(--logo-size); object-fit:contain; filter: drop-shadow(0 2px 6px rgba(0,0,0,.5)); }

/* Bulbs (SVG) */
.bulbs{ position:absolute; inset:-22px; width:calc(100% + 44px); height:calc(100% + 44px); z-index:5; pointer-events:none; animation: bulbsRotate 9s linear infinite;}
.bulb{ fill:url(#bulbGrad); filter: drop-shadow(0 0 7px rgba(245,197,66,.9)) drop-shadow(0 0 16px rgba(245,197,66,.45)); }
.bulb.blink{ animation: blink 1.2s steps(2,end) infinite; }
@keyframes bulbsRotate{ to{ transform: rotate(360deg) } }
@keyframes blink{ 50%{ opacity:.6 } }

.winner-badge{
  position:absolute; bottom:16px; left:50%; transform:translateX(-50%);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  border:1px solid rgba(245,197,66,.35); border-radius:14px; padding:12px 16px;
  font-weight:900; color:var(--gold); letter-spacing:.35px; backdrop-filter: blur(8px);
  box-shadow: 0 8px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.08);
  min-width:240px; text-align:center; display:none;
}

canvas.confetti{ position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; z-index:9999; }
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:10000; background:rgba(0,0,0,.35); backdrop-filter: blur(3px); }
.modal .box{ width:min(520px, 92vw); background:linear-gradient(180deg, #141622, #0f111a); border:1px solid #2a2e42; border-radius:16px; padding:18px; text-align:center; box-shadow: 0 20px 60px rgba(0,0,0,.5); }
.modal h2{margin:10px 0 6px; color:var(--gold)}
.modal p{margin:0 0 12px; color:#cfd3da}
</style>
</head>
<body>
  <canvas class="confetti"></canvas>

  <div class="app">
    <!-- WHEEL -->
    <section class="card">
      <div class="header">
        <div class="title"><span class="dot"></span> Lucky Draw</div>
        <div class="toolbar">
          <button class="btn ghost" id="btnFullscreen">Fullscreen</button>
          <button class="btn ghost" id="btnShuffle">Shuffle</button>
          <button class="btn danger" id="btnClear">Reset</button>
        </div>
      </div>
      <div class="stage">
        <div class="wheel-wrap">
          <div class="pointer" id="pointer"></div>

          <svg class="wheel" id="wheel" viewBox="-50 -50 100 100" aria-label="Spin Wheel"></svg>

          <div class="hub">
            <img class="hub-logo" src="./logo.png" alt="5G88 x EVO VIP" onerror="this.style.display='none'">
          </div>

          <svg class="bulbs" id="bulbs" viewBox="-60 -60 120 120" aria-hidden="true">
            <defs>
              <radialGradient id="bulbGrad" cx="35%" cy="35%">
                <stop offset="0%" stop-color="#fff"/><stop offset="55%" stop-color="#fff"/>
                <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
              </radialGradient>
            </defs>
          </svg>

          <div class="winner-badge" id="winnerBadge">â€”</div>
        </div>
      </div>
      <div class="footer">
        <label class="row-inline" style="gap:8px">
          <input type="checkbox" id="removeAfterWin">
          <span class="muted">Hapus pemenang dari daftar</span>
        </label>
        <div class="row-inline">
          <button class="btn success" id="btnSpin" style="min-width:160px">SPIN</button>
          <button class="btn ghost" id="btnSpinQuick">Spin Cepat</button>
        </div>
      </div>
    </section>

    <!-- NAMES -->
    <section class="card">
      <div class="header">
        <div class="title"><span class="dot"></span> Peserta</div>
        <div class="toolbar"><button class="btn" id="btnExport">Export</button></div>
      </div>
      <div class="content">
        <div class="row-inline">
          <div class="grow">
            <label>Tambah nama</label>
            <input id="nameInput" type="text" placeholder="Contoh: Alex" />
          </div>
          <button class="btn" id="btnAdd">Tambah</button>
        </div>

        <div class="row" style="margin-top:12px">
          <label>Import cepat (pisahkan dengan koma atau baris baru)</label>
          <textarea id="bulkInput" placeholder="Ali, Budi, Cindy&#10;Atau satu per baris"></textarea>
          <div class="row-inline">
            <button class="btn" id="btnBulkAdd">Import</button>
            <span class="muted" style="font-size:12px">Duplikat otomatis dibuang</span>
          </div>
        </div>

        <div style="margin-top:12px">
          <label>Daftar nama</label>
          <div class="names" id="namesList"></div>
        </div>
      </div>
      <div class="footer">
        <span class="muted" id="countInfo">0 nama</span>
      </div>
    </section>
  </div>

  <!-- Winner Modal -->
  <div class="modal" id="winModal" role="dialog" aria-modal="true">
    <div class="box">
      <h2>Pemenang! ðŸŽ‰</h2>
      <p id="winName" style="font-size:26px;font-weight:900;letter-spacing:.4px;color:var(--gold)">â€”</p>
      <div class="row-inline" style="justify-content:center">
        <button class="btn" id="btnSpinAgain">Spin Lagi</button>
        <button class="btn ghost" id="btnCloseModal">Tutup</button>
      </div>
    </div>
  </div>

<script>
(function(){
  const LS_KEY = 'lucky_draw_names.v1';
  const wheel = document.getElementById('wheel');
  const bulbs = document.getElementById('bulbs');
  const badge = document.getElementById('winnerBadge');
  const pointer = document.getElementById('pointer');
  const namesListEl = document.getElementById('namesList');
  const countInfo = document.getElementById('countInfo');
  const confettiCanvas = document.querySelector('canvas.confetti');
  const ctx = confettiCanvas.getContext('2d');
  const winModal = document.getElementById('winModal');
  const winNameEl = document.getElementById('winName');
  const removeAfterWinEl = document.getElementById('removeAfterWin');

  let NAMES = loadNames();
  if(!NAMES.length){ NAMES = ['Alex','Bella','Chong','Dina','Evan','Farah','Gopal','Hana']; }
  let spinning = false;
  let currentRotation = 0; // absolute rotation we set

  /* ===== Helpers ===== */
  function saveNames(){ localStorage.setItem(LS_KEY, JSON.stringify(NAMES)); }
  function loadNames(){ try{ return JSON.parse(localStorage.getItem(LS_KEY)||'[]'); }catch{ return [] } }
  function unique(arr){ return [...new Set(arr.map(s=>s.trim()).filter(Boolean))]; }
  function anglePerSlice(){ return 360 / Math.max(NAMES.length,1); }
  const rad = d => d * Math.PI / 180;
  const norm = d => ((d % 360) + 360) % 360;

  function colorAt(i,total){
    const hue=(i*(360/total)+10)%360;
    const s=76, l=i%2?50:40;
    return `hsl(${hue} ${s}% ${l}%)`;
  }
  function arcPath(cx,cy,r,startDeg,endDeg){
    const large=(endDeg-startDeg)>180?1:0;
    const x1=cx+r*Math.cos(rad(startDeg)), y1=cy+r*Math.sin(rad(startDeg));
    const x2=cx+r*Math.cos(rad(endDeg)),   y2=cy+r*Math.sin(rad(endDeg));
    return `M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 ${large} 1 ${x2} ${y2} Z`;
  }

  /* ===== Bulbs ===== */
  function renderBulbs(){
    bulbs.innerHTML = bulbs.querySelector('defs').outerHTML; // keep gradient
    const total = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--bulb-count')) || 56;
    const r = 58;
    for(let i=0;i<total;i++){
      const a = rad((i/total)*360);
      const x = r*Math.cos(a), y = r*Math.sin(a);
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx', x.toFixed(2));
      c.setAttribute('cy', y.toFixed(2));
      c.setAttribute('r', '2.5');
      c.setAttribute('class', 'bulb blink');
      c.style.animationDelay = (i*0.04)+'s';
      bulbs.appendChild(c);
    }
  }

  /* ===== UI list ===== */
  function renderNamesPills(){
    namesListEl.innerHTML='';
    NAMES.forEach((n,i)=>{
      const pill=document.createElement('span');
      pill.className='name-pill';
      pill.innerHTML=`<b>${escapeHTML(n)}</b><button title="Hapus" data-i="${i}">Ã—</button>`;
      namesListEl.appendChild(pill);
    });
    namesListEl.querySelectorAll('button').forEach(btn=>{
      btn.onclick=()=>{ const idx=+btn.dataset.i; NAMES.splice(idx,1); saveNames(); update(); }
    });
    countInfo.textContent=`${NAMES.length} nama`;
  }
  function escapeHTML(s){ return s.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])) }

  /* ===== Wheel render (labels inside) ===== */
  function renderWheel(){
    const total=Math.max(NAMES.length,1);
    wheel.innerHTML='';
    const g=document.createElementNS('http://www.w3.org/2000/svg','g');
    const A=360/total;
    const baseFont=Math.max(2.8, Math.min(5.8, 9-total*0.3));

    for(let i=0;i<total;i++){
      const start=-90+i*A, end=start+A, mid=(start+end)/2;

      const p=document.createElementNS('http://www.w3.org/2000/svg','path');
      p.setAttribute('d', arcPath(0,0,48,start,end));
      p.setAttribute('fill', NAMES.length? colorAt(i,total): '#1a1d28');
      p.setAttribute('stroke','#0b0c12');
      p.setAttribute('stroke-width','0.6');
      g.appendChild(p);

      const labelG=document.createElementNS('http://www.w3.org/2000/svg','g');
      labelG.setAttribute('transform',`rotate(${mid})`);

      const t=document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('fill','#fff');
      t.setAttribute('font-size',String(baseFont));
      t.setAttribute('font-weight','800');
      t.setAttribute('text-anchor','middle');
      t.setAttribute('dominant-baseline','middle');
      t.setAttribute('x','28'); t.setAttribute('y','0');

      const maxChars=Math.max(6, Math.floor(18-total*0.6));
      let label=(NAMES[i]||'â€”').trim();
      if(label.length>maxChars) label=label.slice(0,maxChars-1)+'â€¦';
      t.textContent=label;

      labelG.appendChild(t); g.appendChild(labelG);

      const bbox=t.getBBox ? t.getBBox() : {width:0,height:0};
      const bg=document.createElementNS('http://www.w3.org/2000/svg','rect');
      const padX=7, padY=3, rx=3;
      bg.setAttribute('x', String(28-bbox.width/2-padX));
      bg.setAttribute('y', String(-bbox.height/2-padY+1));
      bg.setAttribute('width', String(bbox.width+padX*2));
      bg.setAttribute('height', String(bbox.height+padY*2));
      bg.setAttribute('rx', String(rx));
      bg.setAttribute('fill','rgba(0,0,0,.22)');
      bg.setAttribute('stroke','rgba(255,255,255,.12)');
      labelG.insertBefore(bg,t);
    }
    wheel.appendChild(g);
  }

  function update(){ renderWheel(); renderBulbs(); renderNamesPills(); saveNames(); }

  /* ======= Spin with CONSISTENT winner =======
     - We compute absolute final rotation.
     - After transition ends, we derive winner from final angle under pointer.
  */
  function spin({quick=false}={}){
    if(spinning || NAMES.length===0) return;
    spinning=true;
    badge.style.display='none';
    pointer.classList.add('on');

    const slice = anglePerSlice();
    const rounds = quick ? 5 : 10;

    // Pick a target INDEX uniformlyâ€¦
    const targetIndex = Math.floor(Math.random() * NAMES.length);
    // â€¦and land exactly at the CENTER of that slice:
    const sliceCenter = -90 + (targetIndex + 0.5) * slice;  // deg
    const finalRotation = currentRotation + rounds*360 + (-sliceCenter); // rotate wheel so that center hits pointer

    const duration = quick ? 2400 : 4800;
    wheel.style.setProperty('--dur', duration+'ms');
    wheel.style.setProperty('--easing','cubic-bezier(.12,.05,0,1)');
    currentRotation = finalRotation;
    wheel.style.setProperty('--deg', currentRotation+'deg');

    const onDone = ()=>{
      wheel.removeEventListener('transitionend', onDone);
      pointer.classList.remove('on');

      // compute winner FROM FINAL ANGLE (authoritative)
      const R = norm(currentRotation);
      const idx = indexFromRotation(R, slice);

      const winner = NAMES[idx];
      badge.textContent = 'Pemenang: ' + winner;
      badge.style.display = 'block';
      showConfetti();
      showWinnerModal(winner);

      if(removeAfterWinEl.checked){
        NAMES.splice(idx,1);
        update();
      }
      spinning=false;
    };
    wheel.addEventListener('transitionend', onDone, {once:true});

    playTickSound(duration);
  }

  // Given final wheel rotation R (deg), compute which index is at pointer (top).
  function indexFromRotation(R, slice){
    // theta_i = -90 + (i+0.5)*slice ; we need theta_i â‰¡ -R
    const raw = ((90 - R) / slice) - 0.5;
    // round to nearest integer to avoid floating noise then mod
    const i = ((Math.round(raw) % NAMES.length) + NAMES.length) % NAMES.length;
    return i;
  }

  /* ===== Confetti ===== */
  let confettis=[];
  function resizeCanvas(){ confettiCanvas.width=innerWidth; confettiCanvas.height=innerHeight; }
  addEventListener('resize',resizeCanvas); resizeCanvas();
  function makeConfettiBurst(n=260){
    confettis=[];
    for(let i=0;i<n;i++){
      confettis.push({
        x: Math.random()*confettiCanvas.width,
        y: -20 - Math.random()*40,
        vx: (Math.random()-.5)*6,
        vy: Math.random()*2+3,
        g: .05 + Math.random()*.05,
        a: Math.random()*Math.PI,
        va: (Math.random()-.5)*.2,
        s: 4+Math.random()*6,
        c: `hsl(${Math.random()*360} 80% 60%)`,
        life: 200 + Math.random()*120
      });
    }
  }
  (function step(){
    ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    confettis.forEach(p=>{
      p.vy += p.g; p.x += p.vx; p.y += p.vy; p.a += p.va; p.life--;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.a);
      ctx.fillStyle = p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s);
      ctx.restore();
    });
    confettis = confettis.filter(p=>p.life>0 && p.y<confettiCanvas.height+20);
    requestAnimationFrame(step);
  })();
  function showConfetti(){ makeConfettiBurst(280); }

  /* ===== Tick sound (soft) ===== */
  const audioCtx = window.AudioContext ? new AudioContext() : null;
  function playTickSound(duration){
    if(!audioCtx) return;
    const start=audioCtx.currentTime, end=start+duration/1000; let t=start, interval=0.07;
    function tick(at){ const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
      o.type='square'; o.frequency.value=900;
      g.gain.setValueAtTime(0.0001,at);
      g.gain.exponentialRampToValueAtTime(0.12,at+0.005);
      g.gain.exponentialRampToValueAtTime(0.0001,at+0.04);
      o.connect(g).connect(audioCtx.destination); o.start(at); o.stop(at+0.05);
    }
    while(t<end){ tick(t); t+=interval; }
  }

  /* ===== UI ===== */
  document.getElementById('btnSpin').onclick=()=>spin();
  document.getElementById('btnSpinQuick').onclick=()=>spin({quick:true});
  document.getElementById('btnShuffle').onclick=()=>{ for(let i=NAMES.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [NAMES[i],NAMES[j]]=[NAMES[j],NAMES[i]]; } update(); };
  document.getElementById('btnClear').onclick=()=>{ if(confirm('Kosongkan semua nama?')){ NAMES=[]; update(); } };
  document.getElementById('btnExport').onclick=()=>{ const blob=new Blob([NAMES.join('\n')],{type:'text/plain'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='lucky-draw-names.txt'; a.click(); URL.revokeObjectURL(a.href); };
  document.getElementById('btnFullscreen').onclick=()=>{ const root=document.documentElement; if(!document.fullscreenElement){ root.requestFullscreen?.(); } else { document.exitFullscreen?.(); } };
  document.getElementById('btnAdd').onclick=()=>{ const v=document.getElementById('nameInput').value.trim(); if(!v) return; NAMES=unique([...NAMES,v]); document.getElementById('nameInput').value=''; update(); };
  document.getElementById('btnBulkAdd').onclick=()=>{ const raw=document.getElementById('bulkInput').value; const parts=raw.split(/[\n,;]+/).map(s=>s.trim()).filter(Boolean); if(parts.length){ NAMES=unique([...NAMES,...parts]); document.getElementById('bulkInput').value=''; update(); } };

  document.getElementById('btnSpinAgain').onclick=()=>{ winModal.style.display='none'; setTimeout(()=>spin(),200); };
  document.getElementById('btnCloseModal').onclick=()=> winModal.style.display='none';
  winModal.addEventListener('click',(e)=>{ if(e.target===winModal) winModal.style.display='none'; });

  function showWinnerModal(name){ winNameEl.textContent = name; winModal.style.display='flex'; }

  // Init
  update();

  // Shortcuts
  document.addEventListener('keydown',(e)=>{
    if(e.code==='Space'){ e.preventDefault(); spin(); }
    if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='i'){ document.getElementById('nameInput').focus(); }
  });
})();
</script>
</body>
</html>
